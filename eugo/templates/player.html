{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
   
   <!----> <link rel = "stylesheet" type = "text/css" href = '{% static "/eugo/css/bootstrap.css" %}'/>
    
    <link rel="icon" href='{%static "/eugo/img/favicon.ico"%}'>

    <title>EUGO</title>

    <!-- Custom styles for this template -->
    <link href='{% static "/eugo/css/player.css" %}' rel="stylesheet">
  </head>

  <body>
    {% if not user.is_authenticated %}

    <script>window.location.href = "/eugo/logout/";</script>

    {% endif %}

    <!-- The EUGO bar at the top -->
    <div class="full-width-bar">
      <h1>EUGO</h1>
    </div>

    <!-- just print out the username -->
    <div class="whole-page">
      <h2 class="username">{{user.username}}</h2>

      <hr>
      <br>
    </div>

    <!-- the side panel that lets you switch screens -->
    <div class="side-panel">
      <ul class="side-panel-list list-unstyled">
        <li><a href="/eugo/map"> Map </a></li>
        <li><a href="/eugo/lecturers"> Lecturers </a></li>
        <li><a href="/eugo/lecturerdex"> LecturerDex </a>
        <li><a href="/eugo/logout"> Logout </a></li>
      </ul>
    </div>

    <!-- the password validation check for changing user password -->
    <script>
      function check_password() {
        // get the two passwords from the form
        let pass1 = document.forms['password_form']['pass1'].value;
        let pass2 = document.forms['password_form']['pass2'].value;

        // a var for the regex format that the password should be in
        var filter = /^(?=.*?[a-z])(?=.*?[a-z])(?=.*?[0-9])/;

        // check that passwords match
        if (pass1 != pass2) {
          alert("Passwords do not match");
          return false;
        // check that the passwords are in the correct format
        // the checks can be done in any order, doesnt change anything
        } else if (filter.test(pass1)) {
          alert("Password is not in the right format");
          return false;
        }
        // alert of change and that they will be redirected
        alert("Password change successful, please log in again.")
      }
    </script>

    <!-- password input and avatar change forms -->
    <!-- the password form -->
    <!-- the check_password is ran before the POST request is sent to the server-->
    <form id="formp" name="password_form" class="form" method="POST" action="." onsubmit="return check_password()">
      <!-- prevents csrf attacks -->
      {% csrf_token %}
      <!-- first password -->
      <label>
        <input type="password" name="pass1" placeholder="Password" size="50" minlength="8" required>
      </label>
      <br>
      <!-- confirm, or repeat password -->
      <label>
        <input type="password" name="pass2" placeholder="Repeat Password" size="50" minlength="8" required>
      </label>
      <br>
      <!-- the button to submit the form -->
      <label>
        <input type="submit" value="Change Password" size="25">
      </label>
      <br>
    </form>

    
  </body>
</html>